<!DOCTYPE html>
<html>

<head>
    <title>Patient Note Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 1em;
            background-color: #f7f7f7;
        }

        form {
            background-color: white;
            padding: 2em;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2em;
        }

        .form-group {
            margin-bottom: 1em;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: .5em;
        }

        input,
        textarea {
            width: 100%;
            padding: 0.5em;
            border: 1px solid #ddd;
            border-radius: 3px;
            margin-bottom: .5em;
            box-sizing: border-box;
        }

        button {
            display: block;
            width: 100%;
            padding: 1em;
            border: none;
            color: white;
            background-color: #007BFF;
            border-radius: 3px;
            cursor: pointer;
            font-size: 1em;
        }

        button:hover {
            background-color: #0056b3;
        }

        #addCustomSection {
            background-color: #007BFF;
            color: white;
            padding: 0.5em;
            border: none;
            cursor: pointer;
            margin-bottom: 1em;
            border-radius: 3px;
        }

        .custom-section {
            display: flex;
            flex-direction: column;
        }
    </style>
</head>

<body>
    <h1>Patient Note Generator</h1>
    <form id="noteForm">
        <div class="form-group">
            <label for="patientID">Patient ID</label>
            <input type="text" id="patientID" name="patientID" required>
        </div>
        <div class="form-group">
            <label for="observation">Observation</label>
            <input type="text" id="observation" name="observation" required>
        </div>
        <div class="form-group">
            <label for="diagnosis">Diagnosis</label>
            <input type="text" id="diagnosis" name="diagnosis" required>
        </div>
        <div class="form-group">
            <label for="impression">Impression</label>
            <input type="text" id="impression" name="impression" required>
        </div>
        <div class="form-group">
            <label for="plan">Plan</label>
            <textarea id="plan" name="plan" rows="4" required></textarea>
        </div>
        <div id="customSections"></div>
        <button type="button" id="addCustomSection">+ Add Custom Section</button>
        <button type="submit">Generate Note</button>
    </form>

    <script>
        var customSections = document.getElementById('customSections');

        document.getElementById('addCustomSection').addEventListener('click', function () {
            var customSectionDiv = document.createElement('div');
            customSectionDiv.className = 'custom-section';
            customSectionDiv.innerHTML = '<div class="form-group"><label for="customTitle">Title</label><input type="text" class="custom-title" required></div><div class="form-group"><label for="customContent">Content</label><input type="text" class="custom-content" required></div>';
            customSections.appendChild(customSectionDiv);
        });

        document.getElementById('noteForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Stop the form from submitting normally

            var doc = new jsPDF.jsPDF();

            var patientID = document.getElementById('patientID').value;
            var observation = document.getElementById('observation').value;
            var diagnosis = document.getElementById('diagnosis').value;
            var impression = document.getElementById('impression').value;
            var plan = document.getElementById('plan').value;

            doc.text('Patient ID: ' + patientID, 10, 10);
            doc.text('Observation: ' + observation, 10, 20);
            doc.text('Diagnosis: ' + diagnosis, 10, 30);
            doc.text('Impression: ' + impression, 10, 40);
            doc.text('Plan: ' + plan, 10, 50);

            // Adding custom sections
            var customTitles = document.querySelectorAll('.custom-title');
            var customContents = document.querySelectorAll('.custom-content');
            var yPos = 60;
            for (var i = 0; i < customTitles.length; i++) {
                doc.text(customTitles[i].value + ': ' + customContents[i].value, 10, yPos);
                yPos += 10;
            }

            // Adding the date
            var today = new Date();
            var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();
            doc.text('Date: ' + date, 10, yPos);

            // Adding a line for the signature
            yPos += 10;
            doc.text('Signature:', 10, yPos);
            doc.line(70, yPos, 150, yPos); // x1, y1, x2, y2

            doc.save('PatientNote.pdf');
        });
    </script>
</body>

</html>
